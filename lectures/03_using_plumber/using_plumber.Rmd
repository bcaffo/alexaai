---
title: "Using plumber for a custom echo skill hosted on your own server"
output: ioslides_presentation
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

## Summary

- We've created an Alexa app using lambda, Amazon's on demand serverless hosting service
- Now we'd like to try running our own server, and we're going to use R to do it!
- Set up on the Alexa skills kit will be similar; set up on the server will
be a little different

## General overview
- In broad strokes we need
  1. A server that takes input in the correct format over secure http (https) and sends it back in the correct format (adhering to Alexa's json requirements)
  2. Getting a domain name for that server
  3. Setting up our app using the Alexa skills kit
- Each of these steps will be a bit involved, so we'll go through them in detail

## Setting up your server
- Luckily we have Jeff Allen's great work on `plumber` and `alexar` to help us out
- We'll set up our server on Digital Ocean, this is a particularly nice 
cloud platform for running servers so that you don't have to have hardware yourself
  - Other options include: Amazon's EC2 or Google and Microsoft's cloud platforms
  - Or you could run your own with that old laptop that's not doing anything
- Our solution is definitely the easiest for this class
- Step one is to set up and account on Digital Ocean

## Install development version of plumber
- Start an R session, make sure that you have `devtools` installed
- `plumber` is an R package for controlling a webserver using R
- Install required package `analogsea`
- Install `plumber` directly from Jeff Allen's github repo and load it

```{r, eval = FALSE}
install.packages("analogsea")
devtools::install_github("trestletech/plumber")
library(plumber)
```

## Spool up your server, using R!
- Start your server on Digital Ocean using plumber's command
- If you already have a droplet on Digital Ocean you can start it using
this command otherwise it will start a new one
- `unstable = TRUE` tells `plumber` to install development versions of `plumber` on the server

```{r, eval = FALSE}
do_provision(unstable = TRUE)

```